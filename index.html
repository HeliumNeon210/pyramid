<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>三角形タイル時計</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: sans-serif;
      transition: background 0.3s, color 0.3s;
    }

    body.dark {
      background: #111;
      color: #0f0;
    }

    body.light {
      background: #fefefe;
      color: #222;
    }

    #triangle {
      position: relative;
      width: 200px;
      height: 180px;
    }

    .tile {
      width: 40px;
      height: 40px;
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
      position: absolute;
      background-color: gray;
      transition: background-color 0.3s;
    }

    /* 色設定（ダーク） */
    body.dark .tile[data-value="0"] { background-color: black; }
    body.dark .tile[data-value="1"] { background-color: green; }
    body.dark .tile[data-value="2"] { background-color: blue; }

    /* 色設定（ライト） */
    body.light .tile[data-value="0"] { background-color: white; }
    body.light .tile[data-value="1"] { background-color: red; }
    body.light .tile[data-value="2"] { background-color: blue; }

    #themeToggle {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 0.5em 1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    body.dark #themeToggle {
      background-color: #333;
      color: #ccc;
    }

    body.light #themeToggle {
      background-color: #ddd;
      color: #000;
    }
  </style>
</head>
<body class="dark">
  <div id="triangle">
    <!-- タイル10個 -->
    <!-- 1段 -->
    <div class="tile" id="tile0" style="top: 0px; left: 80px;"></div>
    <!-- 2段 -->
    <div class="tile" id="tile1" style="top: 45px; left: 60px;"></div>
    <div class="tile" id="tile2" style="top: 45px; left: 100px;"></div>
    <!-- 3段 -->
    <div class="tile" id="tile3" style="top: 90px; left: 40px;"></div>
    <div class="tile" id="tile4" style="top: 90px; left: 80px;"></div>
    <div class="tile" id="tile5" style="top: 90px; left: 120px;"></div>
    <!-- 4段 -->
    <div class="tile" id="tile6" style="top: 135px; left: 20px;"></div>
    <div class="tile" id="tile7" style="top: 135px; left: 60px;"></div>
    <div class="tile" id="tile8" style="top: 135px; left: 100px;"></div>
    <div class="tile" id="tile9" style="top: 135px; left: 140px;"></div>
  </div>

  <button id="themeToggle">ライトテーマに切り替え</button>

  <script>
    const tiles = Array.from({ length: 10 }, (_, i) => document.getElementById(`tile${i}`));

    function updateTiles() {
      const now = new Date();
      const seconds =
        now.getHours() * 3600 +
        now.getMinutes() * 60 +
        now.getSeconds() +
        now.getMilliseconds() / 1000;

      const maxSteps = Math.pow(3, 10); // 59049
      const currentStep = Math.floor((seconds / 86400) * maxSteps);
      const ternary = currentStep.toString(3).padStart(10, '0');

      for (let i = 0; i < 10; i++) {
        tiles[i].setAttribute("data-value", ternary[i]);
      }
    }

    setInterval(updateTiles, 100);
    updateTiles();

    const body = document.body;
    const toggleButton = document.getElementById("themeToggle");
    toggleButton.addEventListener("click", () => {
      const isDark = body.classList.contains("dark");
      body.classList.toggle("dark", !isDark);
      body.classList.toggle("light", isDark);
      toggleButton.textContent = isDark
        ? "ダークテーマに切り替え"
        : "ライトテーマに切り替え";
    });
  </script>
</body>
</html>
